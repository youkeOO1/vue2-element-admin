{"version":3,"sources":["webpack:///./src/views/login/index.vue?dd2a","webpack:///./src/views/login/index.vue?d34e","webpack:///./src/views/login/index.vue?b8f4","webpack:///src/views/login/index.vue","webpack:///./src/views/login/index.vue?eaff","webpack:///./src/views/login/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","loginForm","loginRules","_v","model","value","callback","$$v","$set","expression","capsTooltip","passwordType","on","showPwd","staticStyle","loading","nativeOn","$event","preventDefault","handleLogin","apply","arguments","staticRenderFns","data","Error","length","username","password","redirect","undefined","otherQuery","watch","$route","handler","console","log","route","query","getOtherQuery","immediate","methods","$refs","validate","valid","Object","keys","reduce","cur","acc","component"],"mappings":"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","file":"js/chunk-728ed530.a0c66c1e.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=56fb363e&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-container\"},[_c('el-form',{ref:\"loginForm\",staticClass:\"login-form\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.loginRules,\"autocomplete\":\"on\",\"label-position\":\"left\"}},[_c('div',{staticClass:\"title-container\"},[_c('h3',{staticClass:\"title\"},[_vm._v(\"Login Form\")])]),_c('el-form-item',[_c('span',{staticClass:\"svg-containter\"},[_c('svg-icon',{attrs:{\"icon-class\":\"user\"}})],1),_c('el-input',{ref:\"username\",attrs:{\"placeholder\":\"请输入用户名\",\"name\":\"username\",\"type\":\"text\",\"tabindex\":\"1\",\"autocomplete\":\"on\"},model:{value:(_vm.loginForm.username),callback:function ($$v) {_vm.$set(_vm.loginForm, \"username\", $$v)},expression:\"loginForm.username\"}})],1),_c('el-tooltip',{attrs:{\"content\":\"大写锁定已开启\",\"placement\":\"left\",\"manual\":\"\"},model:{value:(_vm.capsTooltip),callback:function ($$v) {_vm.capsTooltip=$$v},expression:\"capsTooltip\"}},[_c('el-form-item',[_c('span',{staticClass:\"svg-containter\"},[_c('svg-icon',{attrs:{\"icon-class\":\"password\"}})],1),_c('el-input',{ref:\"password\",attrs:{\"placeholder\":\"请输入密码\",\"name\":\"password\",\"type\":_vm.passwordType,\"tabindex\":\"2\",\"autocomplete\":\"off\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}}),_c('span',{staticClass:\"show-pwd\",on:{\"click\":_vm.showPwd}},[_c('svg-icon',{attrs:{\"icon-class\":_vm.passwordType === 'password' ? 'eye': 'eye-open'}})],1)],1)],1),_c('el-button',{staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"30px\"},attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.handleLogin.apply(null, arguments)}}},[_vm._v(\"Login\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login-container\">\n    <el-form ref=\"loginForm\" class=\"login-form\" :model=\"loginForm\" :rules=\"loginRules\" autocomplete=\"on\" label-position=\"left\">\n      <div class=\"title-container\">\n        <h3 class=\"title\">Login Form</h3>\n      </div>\n      <!-- username  -->\n      <el-form-item>\n        <span class=\"svg-containter\">\n          <svg-icon icon-class=\"user\" />\n        </span>\n        <el-input\n          ref=\"username\"\n          v-model=\"loginForm.username\"\n          placeholder=\"请输入用户名\"\n          name=\"username\"\n          type=\"text\"\n          tabindex=\"1\"\n          autocomplete=\"on\"\n        />\n      </el-form-item>\n      <!-- password -->\n      <el-tooltip v-model=\"capsTooltip\" content=\"大写锁定已开启\" placement=\"left\" manual>\n        <el-form-item>\n          <span class=\"svg-containter\">\n            <svg-icon icon-class=\"password\" />\n          </span>\n          <el-input\n            ref=\"password\"\n            v-model=\"loginForm.password\"\n            placeholder=\"请输入密码\"\n            name=\"password\"\n            :type=\"passwordType\"\n            tabindex=\"2\"\n            autocomplete=\"off\"\n          />\n          <span class=\"show-pwd\" @click=\"showPwd\">\n            <svg-icon :icon-class=\"passwordType === 'password' ? 'eye': 'eye-open'\" />\n          </span>\n        </el-form-item>\n      </el-tooltip>\n      <el-button :loading=\"loading\" type=\"primary\" style=\"width:100%;margin-bottom:30px;\" @click.native.prevent=\"handleLogin\">Login</el-button>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { validUsername } from '@/utils/validate'\n\nexport default {\n  data() {\n    /**\n     * 检查账户\n     */\n    const validateUsername = (rule, value, callback) => {\n      if (validUsername(value)) {\n        callback()\n      } else {\n        callback(new Error('请输入用户名: admin 或者 editor'))\n      }\n    }\n    const validatePassword = (rule, value, callback) => {\n      if (value.length < 6) {\n        callback(new Error('密码长度不能少于6位'))\n      } else {\n        callback()\n      }\n    }\n    return {\n      loginForm: {\n        username: 'admin',\n        password: '111111'\n      },\n      loginRules: {\n        username: [{ required: true, trigger: 'blur', validator: validateUsername }],\n        password: [{ required: true, trigger: 'blur', validator: validatePassword }]\n      },\n      passwordType: 'password',\n      capsTooltip: false,\n      loading: false,\n      redirect: undefined,\n      otherQuery: {}\n    }\n  },\n  watch: {\n    $route: {\n      handler: function(route) {\n        console.log(route, 'route-watch')\n        const query = route.query\n        if (query) {\n          // 获取路由的下一跳\n          this.redirect = query.redirect\n          // 获取路由的其他参数\n          this.otherQuery = this.getOtherQuery(query)\n          console.log(this.redirect, this.otherQuery)\n        }\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    /**\n     * 展示密码\n     */\n    showPwd() {\n      if (this.passwordType === 'password') {\n        this.passwordType = ''\n      } else {\n        this.passwordType = 'password'\n      }\n    },\n    /**\n     * 登录\n     */\n    handleLogin() {\n      console.log('开始登录')\n      this.$refs['loginForm'].validate((valid) => {\n        if (valid) {\n          this.loading = true\n          this.$store.dispatch('user/login', this.loginForm).then(() => {\n            // 跳转路径 两种情况\n            // 第一种: 登录后跳转到首页\n            // 第二种：从某个页面跳转到登录页面，登录成功后再跳转回去\n            // 使用 redirect 实现，每次跳转到登录页面传递过来一个 redirect 参数，当 redirect 为空时说明需要跳转到首页\n            // this.$router.push({\n            //   path: this.redirect || '/',\n            //   query: this.otherQuery\n            // })\n            this.$router.push({ path: this.redirect || '/', query: this.otherQuery })\n            this.loading = false\n          }).catch(() => {\n            // 发送的登录请求发生错误\n            this.loading = false\n          })\n        } else {\n          return false\n        }\n      })\n    },\n\n    /**\n     * 获取其他查询参数\n     * /foo?user=1\n     * @param { Object } query 查询参数\n     */\n    getOtherQuery(query) {\n      return Object.keys(query).reduce((acc, cur) => {\n        if (cur !== 'redirect') {\n          // 获取不是 redirect 的查询参数 redirect 的参数会指向页面\n          acc[cur] = query[cur]\n        }\n        return acc\n      }, {})\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n  $bg: #283443;\n  $light_gray: #fff;\n  $cursor: #fff;\n  .login-container {\n    .el-input {\n      display: inline-block;\n      width: 85%;\n      height: 47px;\n      input {\n        background: transparent;\n        border: 0px;\n        border-radius: 0px;\n        height: 47px;\n        padding: 12px 5px 12px 15px;\n        color: $light-gray;\n        caret-color: $cursor;\n      }\n    }\n    .el-form-item {\n      border: 1px solid rgba(255, 255, 255, 0.1);\n      background: rgba(0, 0, 0, 0.1);\n      border-radius: 5px;\n      color: #454545;\n    }\n  }\n\n</style>\n\n<style lang=\"scss\" scoped>\n  $bg: #2d3a4b;\n  $dark_gray: #889aa4;\n  $light-gray: #eee;\n  .login-container {\n    background: $bg;\n    width: 100%;\n    min-height: 100%;\n    overflow: hidden;\n    .login-form {\n      width: 520px;\n      max-width: 100%;\n      margin: 0 auto;\n      overflow: hidden;\n      padding: 160px 35px 0;\n      box-sizing: border-box;\n      position: relative;\n    }\n    .title-container {\n      position: relative;\n      .title {\n        font-size: 26px;\n        color: $light-gray;\n        text-align: center;\n        font-weight: bold;\n        margin: 0px auto 40px auto;\n      }\n    }\n    .svg-containter {\n      color: $dark_gray;\n      vertical-align: middle;\n      width: 30px;\n      display: inline-block;\n      padding: 6px 5px 6px 15px;\n      box-sizing: border-box;\n    }\n    .show-pwd {\n      position: absolute;\n      right: 10px;\n      top: 7px;\n      font-size: 16px;\n      color: $dark_gray;\n      cursor: pointer;\n      user-select: none;\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=56fb363e&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=56fb363e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"56fb363e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}